<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="/static/js/jquery-1.11.2.min.js"></script>
</head>
<body>
<div>
    <span>
        <label><input type="text" name="title" style="width: 100px; height: 15px; line-height: 15px;"></label>
        <label><input type="text" name="sort" style="width: 30px; height: 15px; line-height: 15px;"></label>
        <a href="javascript:;" data-add>添加</a>
    </span>
    <ul>
        {debug($list)}
        {foreach from=$list key=id item=obj}
        <li>
            [<b>{$id}</b>] -
            <span>{$obj}</span>
            <span>[
                <a href="javascript:;" data-sort="{$id}" data-title="{$obj}" data-up>上移</a>
                <a href="javascript:;" data-sort="{$id}" data-title="{$obj}" data-down>下移</a>
                <a href="javascript:;" data-sort="{$id}" data-title="{$obj}" data-del>删除</a>
            ]</span>
        </li>
        {/foreach}
    </ul>
</div>
<script type="text/javascript">
    $(function () {
        $('[data-add]').click(function () {
            var title = $('[name=title]').val();
            var sort = $('[name=sort]').val();
            call('add', title, sort);
        });
        $('[data-up]').click(function () {
            var sort = $(this).data('sort');
            var title = $(this).data('title');
            call('add', title, sort - 1)
        });
        $('[data-down]').click(function () {
            var sort = $(this).data('sort');
            var title = $(this).data('title');
            call('add', title, sort + 1)
        });
        $('[data-del]').click(function () {
            var sort = $(this).data('sort');
            var title = $(this).data('title');
            call('del', title, sort)
        });
        function call($name, $title, $sort) {
            $.ajax({
                url: '/test/call-' + $name,
                type: 'get',
                data: { 'title':$title, 'sort':$sort },
                success: function (d) {
                    console.log(d, $sort);
                    location.reload();
                }
            });
        }
    });
</script>
</body>
</html>